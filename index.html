<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mung Bean Farming Game</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        button { margin: 5px; padding: 10px; cursor: pointer; }
        #harvest-mode { display: none; width: 100px; height: 100px; background: green; position: relative; margin: auto; }
        #target { width: 30px; height: 30px; background: white; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); cursor: pointer; }
    </style>
</head>
<body>

    <h1>Mung Bean Farming Game</h1>
    <p>Sprouts: <span id="sprouts">0</span></p>
    <p>Harvested Sprouts: <span id="harvested">0</span></p>
    <p>Juice: <span id="juice">0</span></p>
    <p>Tokens: <span id="tokens">0</span></p>
    <p>Rare Mung Beans: <span id="rareBeans">0</span></p>
    <p>Time Played: <span id="timePlayed">0</span> seconds</p>

    <button id="harvestSprout" onclick="harvestSprout()">Harvest Sprout</button>
    <button id="juiceSprouts" onclick="juiceSprouts()">Juice Sprouts</button>
    <button id="sellJuice" onclick="sellJuice()">Sell Juice</button>
    
    <h2>Upgrades</h2>
    <button onclick="buyHarvester()">Buy Harvester (200 Tokens)</button>
    <button onclick="buyJuicer()">Buy Juicer (200 Tokens)</button>
    <button onclick="buyLargerBeans()">Buy Larger Beans (100 Tokens)</button>
    <button onclick="buyFertilizer()">Buy Fertilizer (100 Tokens)</button>

    <h2>Minigame</h2>
    <button onclick="toggleHarvestMode()">Toggle Harvest Mode</button>
    <div id="harvest-mode">
        <div id="target" onclick="harvestSprout(); toggleHarvestMode();"></div>
    </div>

    <p id="winMessage" style="display:none; font-size: 20px; color: green;"></p>

    <script>
        let sprouts = 0, harvested = 0, juice = 0, tokens = 0, rareBeans = 0;
        let hasHarvester = false, hasJuicer = false, hasLargerBeans = false, hasFertilizer = false;
        let timePlayed = 0;
        let harvesterInterval, juicerInterval;
        
        // Sprout Generation (Automatic)
        setInterval(() => { sprouts++; updateUI(); }, 1125);

        // Time Tracker
        setInterval(() => { timePlayed++; document.getElementById('timePlayed').innerText = timePlayed; }, 1000);

        function harvestSprout() {
            if (sprouts > 0) {
                let amount = hasLargerBeans ? 2 : 1;
                sprouts -= amount;
                harvested += amount;
                updateUI();
            }
        }

        function juiceSprouts() {
            if (harvested > 0) {
                juice += 5;
                harvested--;
                updateUI();
            }
        }

        function sellJuice() {
            if (juice > 0) {
                tokens += juice * 10;
                juice = 0;
                updateUI();
            }
        }

        function buyHarvester() {
            if (tokens >= 200 && !hasHarvester) {
                tokens -= 200;
                hasHarvester = true;
                harvesterInterval = setInterval(() => { harvestSprout(); }, 1000);
                updateUI();
            }
        }

        function buyJuicer() {
            if (tokens >= 200 && !hasJuicer) {
                tokens -= 200;
                hasJuicer = true;
                juicerInterval = setInterval(() => { if (harvested > 0) juiceSprouts(); }, 1000);
                updateUI();
            }
        }

        function buyLargerBeans() {
            if (tokens >= 100 && !hasLargerBeans) {
                tokens -= 100;
                hasLargerBeans = true;
                updateUI();
            }
        }

        function buyFertilizer() {
            if (tokens >= 100 && !hasFertilizer) {
                tokens -= 100;
                hasFertilizer = true;
                setInterval(() => {
                    if (Math.random() < 0.05) {
                        rareBeans++;
                        updateUI();
                        checkWinCondition();
                    }
                }, 1000);
                updateUI();
            }
        }

        function updateUI() {
            document.getElementById('sprouts').innerText = sprouts;
            document.getElementById('harvested').innerText = harvested;
            document.getElementById('juice').innerText = juice;
            document.getElementById('tokens').innerText = tokens;
            document.getElementById('rareBeans').innerText = rareBeans;

            document.getElementById('harvestSprout').disabled = sprouts === 0;
            document.getElementById('juiceSprouts').disabled = harvested === 0;
            document.getElementById('sellJuice').disabled = juice === 0;
        }

        function checkWinCondition() {
            if (rareBeans >= 10) {
                document.getElementById('winMessage').innerText = `You have become one with the Mung! Time spent: ${timePlayed} seconds.`;
                document.getElementById('winMessage').style.display = 'block';
            }
        }

        function toggleHarvestMode() {
            let mode = document.getElementById('harvest-mode');
            mode.style.display = mode.style.display === 'none' ? 'block' : 'none';
        }
    </script>

</body>
</html>
